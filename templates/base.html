<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8">
    <title>{% block title %}Nexus{% endblock %}</title>
    <meta name="e2f0ccc5498127220893750886b9407e0a776b0a" content="e2f0ccc5498127220893750886b9407e0a776b0a" />
    <meta name="5d58bdc2cdf760abee1e80f43683e42fe874a9c8" content="5d58bdc2cdf760abee1e80f43683e42fe874a9c8" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=verified_user" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      .title {
        color: #0d6efd;
      }
      /* Styles inspirés de BlueSky */
      body {
        background-color: #f5f7fa;
        color: #333;
      }
      .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        height: 100vh;
        width: 240px;
        background: linear-gradient(180deg, #f8fafc 0%, #e7f1ff 100%);
        box-shadow: 2px 0 12px rgba(13,110,253,0.07);
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 0;
        z-index: 1000;
      }
      .sidebar .logo-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 180px;
        width: 100%;
      }
      .sidebar .navbar-brand {
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      .sidebar .navbar-brand img {
        height: 60px;
        margin-bottom: 10px;
      }
      .sidebar .navbar-nav {
        flex-direction: column;
        width: 100%;
        align-items: stretch;
        gap: 8px;
        padding: 0 0 20px 0;
      }
      .sidebar .nav-item {
        width: 100%;
      }
      .sidebar .nav-link {
        display: flex;
        align-items: center;
        gap: 12px;
        color: #333;
        padding: 14px 32px 14px 32px;
        width: 100%;
        border-radius: 0 24px 24px 0;
        font-size: 1.08rem;
        font-weight: 500;
        background: none;
        border: none;
        transition: background 0.18s, color 0.18s, box-shadow 0.18s;
        box-shadow: none;
        position: relative;
      }
      .sidebar .nav-link.active, .sidebar .nav-link:hover {
        background: linear-gradient(90deg, #e7f1ff 60%, #d0e3ff 100%);
        color: #0d6efd;
        box-shadow: 2px 0 8px rgba(13,110,253,0.07);
      }
      .sidebar .nav-link .material-icons {
        font-size: 1.4em;
        color: #0d6efd;
        opacity: 0.8;
        transition: color 0.18s;
      }
      .sidebar .nav-link:hover .material-icons {
        color: #084298;
        opacity: 1;
      }
      .sidebar hr {
        width: 80%;
        margin: 18px auto 18px auto;
        border: none;
        border-top: 1.5px solid #e3e8ee;
      }
      @media (max-width: 768px) {
        .sidebar {
          position: static;
          width: 100%;
          height: auto;
          flex-direction: row;
          box-shadow: none;
          padding: 0;
        }
        .sidebar .logo-container {
          height: auto;
          width: auto;
        }
        .main-content {
          margin-left: 0;
          padding: 10px;
        }
        .sidebar .navbar-nav {
          flex-direction: row;
          width: auto;
          gap: 0;
        }
        .sidebar .nav-link {
          border-radius: 0;
          padding: 10px 12px;
          margin-bottom: 0;
          justify-content: center;
        }
        .sidebar hr {
          display: none;
        }
      }
  
      .ubuntu-light {
    font-family: "Ubuntu", serif;
    font-weight: 300;
    font-style: normal;
  }
  
  .ubuntu-regular {
    font-family: "Ubuntu", serif;
    font-weight: 400;
    font-style: normal;
  }
  
  .ubuntu-medium {
    font-family: "Ubuntu", serif;
    font-weight: 500;
    font-style: normal;
  }
  
  .ubuntu-bold {
    font-family: "Ubuntu", serif;
    font-weight: 700;
    font-style: normal;
  }
  
  .ubuntu-light-italic {
    font-family: "Ubuntu", serif;
    font-weight: 300;
    font-style: italic;
  }
  
  .ubuntu-regular-italic {
    font-family: "Ubuntu", serif;
    font-weight: 400;
    font-style: italic;
  }
  
  .ubuntu-medium-italic {
    font-family: "Ubuntu", serif;
    font-weight: 500;
    font-style: italic;
  }
  
  .ubuntu-bold-italic {
    font-family: "Ubuntu", serif;
    font-weight: 700;
    font-style: italic;
  }
  
      body.dark-mode {
        background-color: #181a1b;
        color: #e3e3e3;
      }
      .sidebar.dark-mode {
        background: linear-gradient(180deg, #23272b 0%, #181a1b 100%);
        box-shadow: 2px 0 12px rgba(13,110,253,0.12);
      }
      .sidebar.dark-mode .navbar-brand img {
        filter: brightness(0.9) contrast(1.2);
      }
      .sidebar.dark-mode .nav-link {
        color: #e3e3e3;
      }
      .sidebar.dark-mode .nav-link.active, .sidebar.dark-mode .nav-link:hover {
        background: linear-gradient(90deg, #23272b 60%, #2c3237 100%);
        color: #6ea8fe;
      }
      .sidebar.dark-mode .nav-link .material-icons {
        color: #6ea8fe;
      }
      .sidebar.dark-mode hr {
        border-top: 1.5px solid #2c3237;
      }
      .main-content.dark-mode {
        background: none;
        color: #e3e3e3;
      }
      .alert-info.dark-mode {
        background-color: #23272b;
        color: #e3e3e3;
        border-color: #2c3237;
      }
      .alert-success.dark-mode {
        background-color: #1e2b1e;
        color: #b6fcb6;
        border-color: #2c3237;
      }
      .alert-danger.dark-mode {
        background-color: #2b1e1e;
        color: #fcb6b6;
        border-color: #2c3237;
      }
    </style>
  </head>
<body>
  <div class="sidebar" id="sidebar">
    <div class="logo-container">
      <a class="navbar-brand title ubuntu-medium" href="{{ url_for('index') }}">
        <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo">
        <span style="font-size:1.3em; color:#0d6efd; font-weight:600; letter-spacing:1px;">Nexus</span>
      </a>
    </div>
    <ul class="navbar-nav">
      {% if current_user.is_authenticated %}
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('profile', username=current_user.username) }}">
          <span class="material-icons">person</span>
          {{ current_user.username }}
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('logout') }}">
          <span class="material-icons">logout</span>
          Déconnexion
        </a>
      </li>
      {% else %}
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('login') }}">
          <span class="material-icons">login</span>
          Connexion
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{{ url_for('register') }}">
          <span class="material-icons">person_add</span>
          Inscription
        </a>
      </li>
      {% endif %}
    </ul>
    <hr>
    <div class="mt-auto mb-3 w-100 d-flex justify-content-center">
      <button id="darkModeToggle" class="btn btn-outline-secondary w-75" style="border-radius: 20px;">
        <span class="material-icons align-middle" id="darkModeIcon">dark_mode</span>
        <span class="align-middle" id="darkModeText">Mode sombre</span>
      </button>
    </div>
  </div>
  <div class="main-content" id="mainContent">
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="alert alert-info">
          {% for message in messages %}
            <div>{{ message }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
    <script>
(function(amtv){
var d = document,
    s = d.createElement('script'),
    l = d.scripts[d.scripts.length - 1];
s.settings = amtv || {};
s.src = "//oilycoat.com/blX/VosId.G/lH0jYIWdcP/leomX9_udZXUOl_kRPlTRYE0/N/jHc/2MNtzzMoteNwjCQ/2xNAzYYx3/NxAL";
s.async = true;
s.referrerPolicy = 'no-referrer-when-downgrade';
l.parentNode.insertBefore(s, l);
})({})
</script>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Dark mode toggle
    const darkModeToggle = document.getElementById('darkModeToggle');
    const sidebar = document.getElementById('sidebar');
    const mainContent = document.getElementById('mainContent');
    const darkModeIcon = document.getElementById('darkModeIcon');
    const darkModeText = document.getElementById('darkModeText');
    function setDarkMode(on) {
      if(on) {
        document.body.classList.add('dark-mode');
        sidebar.classList.add('dark-mode');
        mainContent.classList.add('dark-mode');
        document.querySelectorAll('.alert').forEach(a=>a.classList.add('dark-mode'));
        darkModeIcon.textContent = 'light_mode';
        darkModeText.textContent = 'Mode clair';
        localStorage.setItem('darkMode', '1');
      } else {
        document.body.classList.remove('dark-mode');
        sidebar.classList.remove('dark-mode');
        mainContent.classList.remove('dark-mode');
        document.querySelectorAll('.alert').forEach(a=>a.classList.remove('dark-mode'));
        darkModeIcon.textContent = 'dark_mode';
        darkModeText.textContent = 'Mode sombre';
        localStorage.setItem('darkMode', '0');
      }
    }
    darkModeToggle.addEventListener('click', ()=>{
      setDarkMode(!document.body.classList.contains('dark-mode'));
    });
    // Init on load
    if(localStorage.getItem('darkMode')==='1') setDarkMode(true);
  </script>
</body>
</html>